{% extends 'base.html' %}
{% block head %}<link rel="shortcut icon" href="/favicon.ico" />{% endblock %}

{% block title %}Bird Page{% endblock %}

{% block content %}

<h1>Bird Details</h1>
<h2>{{ bird.comName }}</h2>


{% if bird_photo %}
  <img src={{ bird_photo[0] }}></img>
  <img src={{ bird_photo[1] }}></img>
  <br>
  <img src={{ bird_photo[2] }}></img>
  <img src={{ bird_photo[3] }}></img>
{% else %}

  <img src="https://i.pinimg.com/originals/94/78/b5/9478b558a1136e2f9958b458ea2e6dd8.jpg"></img>
{% endif %}

<br>
<button id='faveOnOff' class='faveText'>Favorite</button>


<p>{{ bird.comName }}'s scientific name is {{ bird.sciName }}!</p>


<b>Bird info:</b> <span id='birdInfo'>Unknown</span>


<p>Bird song clip (if it exists):</p>

<audio controls>
  <source src="https://www.xeno-canto.org/277771" type="audio/ogg">
Your browser does not support the audio element.
</audio>


<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

<script>
  "use strict";


// check database if fave exists
var faveButton = document.querySelector('#faveOnOff');

function showResult(result) {
  console.log(result);
}

function addRemoveFave(evt) {
  console.log('I pressed the button');

  if (faveButton.innerHTML === 'Favorite') {
    faveButton.innerHTML = 'Unfavorite';
    $.post('/remove_fave', 
      {
        'common_name': '{{ bird.comName }}',
        'sci_name': '{{ bird.sciName }}',
        'bird_id': bird_id
      }, 
      showResult);
  }
  else {
    faveButton.innerHTML = 'Favorite';
    $.post('/add_fave', 
      {
        'common_name': '{{ bird.comName }}',
        'sci_name': '{{ bird.sciName }}' 
      }, 
      showResult);
  }
}


faveButton.addEventListener('click', addRemoveFave);

</script>




{% endblock %}